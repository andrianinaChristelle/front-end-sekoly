{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { getItem, addItem, removeitem, removeItem } from \"./LocalStorage\";\nexport function hasAuthenticated() {\n  const token = getItem('miniblogToken');\n  const result = token ? tokenIsValid(token) : false;\n\n  if (false === result) {\n    removeItem('miniblogToken');\n  }\n\n  return result;\n}\nexport function login(credentials) {\n  return axios.post('http://127.0.0.1:8000/api/login', credentials).then(response => response);\n}\nexport function logout() {\n  removeItem('miniblogToken');\n}\n\nfunction tokenIsValid(token) {\n  const {\n    exp\n  } = jwtDecode(token);\n\n  if (exp * 1000 > new Date().getTime()) {\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["D:/fenarana/projet/front-sekoly/src/services/AuthAp.js"],"names":["axios","jwtDecode","getItem","addItem","removeitem","removeItem","hasAuthenticated","token","result","tokenIsValid","login","credentials","post","then","response","logout","exp","Date","getTime"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,UAA3B,EAAuCC,UAAvC,QAAyD,gBAAzD;AAEA,OAAO,SAASC,gBAAT,GAA4B;AAC/B,QAAMC,KAAK,GAAGL,OAAO,CAAC,eAAD,CAArB;AACA,QAAMM,MAAM,GAAGD,KAAK,GAAGE,YAAY,CAACF,KAAD,CAAf,GAAyB,KAA7C;;AAEA,MAAI,UAAUC,MAAd,EAAsB;AAClBH,IAAAA,UAAU,CAAC,eAAD,CAAV;AACH;;AACD,SAAOG,MAAP;AACH;AACD,OAAO,SAASE,KAAT,CAAeC,WAAf,EAA4B;AAC/B,SAAOX,KAAK,CACPY,IADE,CACG,iCADH,EACsCD,WADtC,EAEFE,IAFE,CAEGC,QAAQ,IAAIA,QAFf,CAAP;AAGH;AAED,OAAO,SAASC,MAAT,GAAkB;AACrBV,EAAAA,UAAU,CAAC,eAAD,CAAV;AACH;;AAED,SAASI,YAAT,CAAsBF,KAAtB,EAA6B;AACzB,QAAM;AAAES,IAAAA;AAAF,MAAUf,SAAS,CAACM,KAAD,CAAzB;;AACA,MAAIS,GAAG,GAAG,IAAN,GAAa,IAAIC,IAAJ,GAAWC,OAAX,EAAjB,EAAuC;AACnC,WAAO,IAAP;AACH;;AAED,SAAO,KAAP;AACH","sourcesContent":["import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { getItem, addItem, removeitem, removeItem } from \"./LocalStorage\";\r\n\r\nexport function hasAuthenticated() {\r\n    const token = getItem('miniblogToken');\r\n    const result = token ? tokenIsValid(token) : false;\r\n\r\n    if (false === result) {\r\n        removeItem('miniblogToken');\r\n    }\r\n    return result;\r\n}\r\nexport function login(credentials) {\r\n    return axios\r\n        .post('http://127.0.0.1:8000/api/login', credentials)\r\n        .then(response => response);\r\n}\r\n\r\nexport function logout() {\r\n    removeItem('miniblogToken');\r\n}\r\n\r\nfunction tokenIsValid(token) {\r\n    const { exp } = jwtDecode(token);\r\n    if (exp * 1000 > new Date().getTime()) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}"]},"metadata":{},"sourceType":"module"}